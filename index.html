<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>jQuery validate plugin usage</title>
    <style type="text/css">
        /* input[type=text]{
    display:block;
} */
        .phone-group {}

        .has_error {
            border: 1px solid red;
        }

        .error {
            color: greenyellow;
        }

        form {
            width: 500px;
            margin: 30px auto;
        }
    </style>
</head>

<body>
    <form id="inputForm" method="post">
        Name: <input type="text" name="name"> <br /> <br />
        Age(1~150): <input type="text" name="age"> <br /> <br />
        Phone: <input type="text" name="phone"> (regex) <br /> <br />
        Email: <input type="text" name="email"> <br /> <br />
        Password: <input type="text" name="psd"> <br /> <br />
        <input type="radio" name="sex" value="male" checked>Male <input type="radio" name="sex" value="female">Female
        <br /> <br />
        File: <input type="text" name="file"> <br /> <br />
        Car: <select name="cars">
            <option value=""> ---- </option>
            <option value="volvo">Volvo</option>
            <option value="saab">Saab</option>
            <option value="fiat">Fiat</option>
            <option value="audi">Audi</option>
        </select> <br /> <br />
        Mobile phone: <input class="phone-group" id="mobile_phone" name="mobile_phone"> <br /> <br />
        Home phone: <input class="phone-group" id="home_phone" name="home_phone"> <br /> <br />
        Work phone: <input class="phone-group" id="work_phone" name="work_phone"> <br /> <br />

        Email1:<input name="email1" class="cemail" /> <br /> <br />
        Email2:<input name="email2" class="cemail" /> <br /> <br />
        Email3:<input name="email3" class="cemail" /> <br /> <br />
        <input type="checkbox" name="marriage" id="marriage" value="1">Married <br> <br>
        <input type="text" name="mateName" /> <br> <br>
        <input type="submit" value="Submit">
        <!-- <input type="button" value="noty" id="btnNoty" > -->
    </form>
    <!-- <script src="http://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.0/jquery.validate.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.0/additional-methods.min.js"></script> -->
    <script src="./scripts/jquery-1.10.2.min.js"></script>
    <script src="./scripts/jquery.validate.min.js"></script>
    <script src="./scripts/additional-methods.min.js"></script>
    <link href="./css/noty.css" rel="stylesheet">
    <script src="./scripts/noty.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $("#btnNoty").click(function () {
            new Noty({
                text: 'Some notification text',
            }).show();

        });
        $.validator.addMethod("laxEmail", function (value, element) {
            // allow any non-whitespace characters as the host part
            return this.optional(element) || /^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@(?:\S{1,63})$/.test(value);
        }, 'Please enter a valid email address.');
        // $.extend(jQuery.validator.messages, {
        //     required: "必填项",
        // });

        $.validator.messages.required = "";

        // $("form").validate({
        //     errorPlacement: function (error, element) {
        //         error.appendTo(element.parent("td").next("td"));
        //     }
        // });

        $.validator.addClassRules("cemail", { required: true, email: true, minlength: 16 });
        $(function () {
            $("form").validate({
                debug: true,
                // remote
                // errorPlacement: function (error, element) {
                //     error.appendTo(element.next("p"));
                // },
                // showErrors: function (map, list) {
                //     new Noty({
                //         text: map.value,
                //         container: list.element
                //     }).show();
                // },
                // errorElement: "p",
                // errorPlacement: function (error, element) {
                //     new Noty({
                //         text: 'error',
                //         container: element.parent
                //     }).show();
                // },
                rules: {
                    name: "required",
                    age: {
                        required: true,
                        min: 1,
                        max: 150, // or range: [1, 150]
                        digits: true
                    },
                    phone: {
                        required: true,

                    },
                    email: {
                        required: true,
                        email: true
                    },
                    cars: "required",
                    psd: {
                        required: true,
                        minlength: 8
                    },
                    file: {
                        required: true,
                        extension: "xml",
                        pattern: "[0-9]*.xml"
                    },
                    mobile_phone: {
                        require_from_group: [1, ".phone-group"]
                    },
                    home_phone: {
                        require_from_group: [1, ".phone-group"]
                    },
                    work_phone: {
                        require_from_group: [1, ".phone-group"]
                    },
                    mateName: {
                        required: "#marriage:checked"
                    }
                },
                messages: {
                    file: {
                        extension: "file must be .xml",
                        pattern: "文件名必须是数字"
                    }
                },
                highlight: function (element, errorClass) {
                    $(element).fadeOut(1000, function () {
                        $(element).fadeIn();
                        $(element).addClass('has_error');
                        // $(element).parent().addClass('error')
                    });
                },
                unhighlight: function (element) {
                    // remove the class "has_error" from the element 
                    $(element).removeClass('has_error');
                    // $(element).parent().removeClass('error')
                },
            });
        })
    </script>
</body>
<script>
    // $("form").validate({
    //     highlight: function (element) {
    //         // add a class "has_error" to the element 
    //         $(element).addClass('has_error');
    //     },
    //     unhighlight: function (element) {
    //         // remove the class "has_error" from the element 
    //         $(element).removeClass('has_error');
    //     },
    // })
</script>

</html>